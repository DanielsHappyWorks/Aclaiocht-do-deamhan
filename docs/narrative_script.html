<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.534">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Exercise Your Demons - Game Script</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Exercise Your Demons</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./design.html"> 
<span class="menu-text">Game Design Doc</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./narrative_script.html" aria-current="page"> 
<span class="menu-text">Game Script</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DanielsHappyWorks/Aclaiocht-do-deamhan"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/watch?v=KJoaKhQFUJQ"> <i class="bi bi-youtube" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://boopdood.itch.io/exercise-your-demons"> <i class="bi bi-controller" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<div class="quarto-about-solana column-body content">
  <div class="about-entity">
    <div class="entity-contents">
      <header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Game Script</h1>
</div>
<div class="quarto-title-meta">
  </div>
</header> 
      <div class="about-contents"><main class="content" id="quarto-document-content">
<section id="sequence-diagram" class="level1">
<h1>Sequence Diagram</h1>
<!--
https://bramp.github.io/js-sequence-diagrams/
Introductions->Player: Game introduction plays
Player->Banshee: PLAYER meets CHAOINTE
Player->Player: Reflection in Interaction next morning
Player->Introductions: PLAYER goes to gym
Introductions->Player: PUCA introduction plays
Player->Pooka: PLAYER meets PUCA
Player->Player: Reflection in Interaction next morning
Player->Introductions: PLAYER goes to gym
Introductions->Player: CROM introduction plays
Player->Dullahan: PLAYER meets CROM
Player->Player: Reflection in Interaction next morning
-->
<p>This is the expected sequence of events that will take place for the beta release of the game. The events are not grouped in chronological order but instead are detailed in order of character interactions to make it easier to code these into the game.</p>
<p><img src="./images/narr_seq.svg" class="img-fluid"></p>
</section>
<section id="introductions" class="level1">
<h1>Introductions</h1>
<section id="int.-gym---day---trigger-character-creation-completed" class="level3">
<h3 data-anchor-id="int.-gym---day---trigger-character-creation-completed"><strong>INT. GYM - DAY - TRIGGER: Character Creation Completed</strong></h3>
<p>Plays after the character creation acting as a tutorial for the game while introducing the PLAYER to ST. PADDY, their new job and the banshee. The PLAYER is limited to working at this time.</p>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>Finally arrived. Uncle Colin really pulled through for me here. Not sure I could have landed this gig without him. Better make sure to thank him soon. ’Tis been hard the last few weeks.</em></span></p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>Ahh you finally made it. The name is Paddy. I’m the manager of this here joint. Tír na Sioga we call it.</p>
<p><strong><em>PLAYER</em></strong></p>
<p>I’m {{NAME}}, thank you for taking me on on such short notice.</p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>Looking forward to having you on board.</p>
<p>Colin said it’s your first time coming to Inishsióg.</p>
<p>Good chap that one. What are your thoughts on the place so far? We have some good folk here; I’m sure you’ll all get along.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>Land of the Fairies on Fairy Island, what a name! I hope this place isn’t filled with nutcases.</em></span></p>
<p>Only had a quick look around after the boat from Galway arrived. Seems a nice and quaint island.</p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>It’s about time we get some help around here.</p>
<p>Grand, let’s put you right to work so.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>Need to put my best foot forward here, can’t put this opportunity to waste.</em></span></p>
<p>Sounds good, where should I start?</p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>Grand, you’re going to work with some fairly odd folk here but they are good at heart.</p>
<p>All ya need to do is chat and help ’em out. You’ll get paid for any day or night shift ya take on.</p>
<p>Make sure to treat ’em well, they need good people to spend some time with.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>Ugh, I was hoping for a more low-key role here. Blending in with the wallpaper would be nice. Meeting new people is a real tough ask but I can’t let me family down again.</em></span></p>
<p>Ok, I’ll do my best.</p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>You sure you’re up for this? Ya seem a bit pale.</p>
<p><strong><em>PLAYER</em></strong></p>
<p>Yep, leave it to me!</p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>Alright, we don’t get many people in here. It’s rare to see more than one person come in sometimes.</p>
<p>Seems like today Chaointe Doran dropped by. She’s a timid spirit that struggles with conversation but she really likes to talk.</p>
<p>If you take it slow, I’m sure she’ll warm up to ya in no time.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>Wow shes a looker but she does seem fidgety about my presence here. If Paddy didn’t point her out I’m not sure I’d have seen her. Her presence seems so faint.</em></span></p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>The people she gets to know don’t stick around for long so take care to be a good attentive person she can lean on.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>The way he said that first part sent chills down my spine. ’Tis odd but it can’t be that bad right?</em></span></p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>Your job today is to introduce yourself and help her out. O’ am countin’ on ya, good luck kid.</p>
<p>Take care now, am off to cater my pride and joy so. Oh ho ho! Paddy’s Pub we’ll make you great again now that I have more time.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>Paddy waddled off humming such a joyful tune; I wonder what it was. Alright time to get to it. It’s not like Chaointe bites, right?!</em></span></p>
</center>
<p>The next day they will have a choice of where they want to head during the day.</p>
<p><br></p>
</section>
<section id="int.-gym---daynight---trigger-entered-the-gym-to-work-a-second-time" class="level3">
<h3 data-anchor-id="int.-gym---daynight---trigger-entered-the-gym-to-work-a-second-time"><strong>INT. GYM - DAY/NIGHT - TRIGGER: Entered the gym to work a second time</strong></h3>
<p>The Player enters the Gym to work for a second time. St.&nbsp;Paddy introduces the second character who is a pooka.</p>
<center>
<p><strong><em>ST. PADDY</em></strong></p>
<p>Welcome back, good to have ya here again. Ready for another day at work?</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>He sounds way too happy to see me. Something tells me he’s about to run off again and leave me to deal with the shortie in the corner.</em></span></p>
<p>Aye Aye Captain!</p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>Lovely enthusiasm, I see you’re already staring down Monsieur Púca Cleasaí.</p>
<p>Ya know its rude to stare right, tho he’d do the same. All I can do is hope your not two peas in a pod.</p>
<p>He’s a bit of a trickster you see. Whatever you do, don’t let him push you about OK.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>I nodded back at Paddy and wondered if this guy might be a kindred spirit.</em></span></p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>With this one you have to make sure you don’t let the peer pressure get to you. Don’t want to do things you’ll regret after all.</p>
<p>If you’re not up for this your always free to leave and come back another day.</p>
<p>Alright, am off to my home sweet home for a pint.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>What a man, so much joy but hes only got the pub on his mind. I wonder if I’ll ever have a place like that.</em></span></p>
See you soon boss!
</center>
<p>You now have the choice of working or doing something else entirely. Waking into a location will not lock you out of doing other things anymore.</p>
<p><br></p>
</section>
<section id="int.-gym---daynight---trigger-entered-the-gym-to-work-a-third-time" class="level3">
<h3 data-anchor-id="int.-gym---daynight---trigger-entered-the-gym-to-work-a-third-time"><strong>INT. GYM - DAY/NIGHT - TRIGGER: Entered the gym to work a third time</strong></h3>
<p>The Player enters the Gym to work for a third time. St.&nbsp;Paddy introduces the third character who is a dullahan. The scene is a bit tense as this is is the first time the player outright finds out the people here aren’t human.</p>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p>A-Ahhh, t-that parson’s h-head i-is…</p>
<p><span style="color:SlateGray"><em>Before I could finish my sentence, Paddy put his hand over my mouth to stop me. All I could see was the severed head glaring at me from a distance.</em></span></p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>C’mere to me, whatever your about to yell stuff it down deep and don’t. We don’t need this beautiful day going arseways.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>I gulped holding my fear back. Paddy’s demeanour shifted from the usual happy go lucky caring self. What is this, should I leg it while I still can?</em></span></p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>Calm down kid, I’m sure you’ve realized it by know. Everyone who comes here ain’t exactly human but they are good people.</p>
<p>Our little lady over there is the headless rider herself, Crom Dubh. Try not to cross her as she’s got a tendency for violence.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>Paddy is right, I already knew this place was odd. Knowing I’m not seeing a dead body has put me slightly at ease.</em></span></p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>Yeah, you’ll be fine. Today might be a tough day on the job but you’ve got this, after all you already meet some inhuman guests of ours. Just make sure to apologize for that outburst.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>I guess I’m gonna need to figure out whats up with this town. It’s so odd that I may just fit right in. These misfits may be my kind of odd but should I really be here?</em></span></p>
<p>W-will do. Sorry for making things uncomfortable.</p>
<p><strong><em>ST. PADDY</em></strong></p>
<p>’Tis grand, reflecting on and rectifying our mistakes is important.</p>
<p>I’ll leave ya to it so. Am off to take care of da pub.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>No humming today. I really soured the mood. Not a great way to start another day on the job. I should at least go and apologize.</em></span></p>
</center>
<p><br></p>
</section>
</section>
<section id="player-events" class="level1">
<h1>Player Events</h1>
<section id="int.-home---morning---trigger-morning-after-meeting-the-banshee" class="level3">
<h3 data-anchor-id="int.-home---morning---trigger-morning-after-meeting-the-banshee"><strong>INT. HOME - MORNING - TRIGGER: Morning after meeting the banshee</strong></h3>
<p>The PLAYER reflects on their meeting with CHAOINTE.</p>
<section id="good-choice" class="level4">
<h4 data-anchor-id="good-choice">Good Choice</h4>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>I woke up early with my muscles aching from the exercise. It feels good to have exercised yesterday. The sleep felt so much better than usual.</em></span></p>
<p><span style="color:SlateGray"><em>Chaointe was so nice. I should make sure to exercise with her again soon. I really got to learn more from her if I’m going to do a good job at the gym.</em></span></p>
<p><span style="color:SlateGray"><em>Alright! Time to put this new found energy to good use. Should I go to work or visit the town? Paddy doesn’t seem to mind which shifts I take.</em></span></p>
</center>
</section>
<section id="bad-choice" class="level4">
<h4 data-anchor-id="bad-choice">Bad Choice</h4>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>I woke up early with my muscles aching from the exercise. My sleep was awful and I’m aching so much.</em></span></p>
<p><span style="color:SlateGray"><em>I still feel weird about the interaction I’ve had with Chaointe. Maybe I can still make it up to her.</em></span></p>
<p><span style="color:SlateGray"><em>Ehhh, I guess I should get up and try to get out of bed. The parents would be so disappointed If I failed at another job. I wouldn’t be able to face uncle Colin after this either.</em></span></p>
</center>
</section>
</section>
<section id="int.-home---morning---trigger-morning-after-meeting-the-pooka" class="level3">
<h3 data-anchor-id="int.-home---morning---trigger-morning-after-meeting-the-pooka"><strong>INT. HOME - MORNING - TRIGGER: Morning after meeting the pooka</strong></h3>
<p>The PLAYER reflects on their meeting with PUCA.</p>
<section id="good-choice-1" class="level4">
<h4 data-anchor-id="good-choice-1">Good Choice</h4>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>We made a bit of a mess yesterday with Púca. Can’t believe I got tricked into it for the mans enjoyment. I’m glad we sorted it out so quickly.</em></span></p>
<p><span style="color:SlateGray"><em>Leaving the gym in a better state then we started was great. We got to clean some stuff that doesn’t usually get done.</em></span></p>
</center>
<p><br></p>
</section>
<section id="bad-choice-1" class="level4">
<h4 data-anchor-id="bad-choice-1">Bad Choice</h4>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>That little garden gnome of a man had me doing to much extra work last night. I can’t believe I spent so much extra time cleaning up that mess on my own.</em></span></p>
<p><span style="color:SlateGray"><em>I hope Paddy isn’t too annoyed with the slight re-modelling. I couldn’t fix it all alone.</em></span></p>
</center>
<p><br></p>
</section>
</section>
<section id="int.-home---morning---trigger-morning-after-meeting-the-dullaghan" class="level3">
<h3 data-anchor-id="int.-home---morning---trigger-morning-after-meeting-the-dullaghan"><strong>INT. HOME - MORNING - TRIGGER: Morning after meeting the dullaghan</strong></h3>
<p>The PLAYER reflects on their meeting with Crom.</p>
<section id="good-choice-2" class="level4">
<h4 data-anchor-id="good-choice-2">Good Choice</h4>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>I should meet Crom again. She must have some interesting stories to tell being a dullahan and all.</em></span></p>
<p><span style="color:SlateGray"><em>I wonder what the other gym goers are. It’s a delicate subject so I should take care.</em></span></p>
</center>
<p><br></p>
</section>
<section id="bad-choice-2" class="level4">
<h4 data-anchor-id="bad-choice-2">Bad Choice</h4>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>I gotta make sure my head doesn’t come off next time I meet Crom. She seems like shes got a violent streak going.</em></span></p>
<p><span style="color:SlateGray"><em>I wonder what creatures the other gym goers are. I should avoid offending them too.</em></span></p>
</center>
<p><br></p>
</section>
</section>
<section id="int.-home---morning---trigger-on-completing-13-of-the-character-events" class="level3">
<h3 data-anchor-id="int.-home---morning---trigger-on-completing-13-of-the-character-events"><strong>INT. HOME - MORNING - TRIGGER: On completing 1/3 of the character events</strong></h3>
<p>The PLAYER has well and truly accepted their role at the gym. It’s starting to seem like they may have found a place where they belong. The PLAYER and ST. PADDY have a chat with some banter while PADDY checks in on the PLAYER.</p>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="int.-home---morning---trigger-on-completing-12-of-the-character-events" class="level3">
<h3 data-anchor-id="int.-home---morning---trigger-on-completing-12-of-the-character-events"><strong>INT. HOME - MORNING - TRIGGER: On completing 1/2 of the character events</strong></h3>
<p>The PLAYER meets paddy they catch up. They discuss the players success so far but conflict arises as ST. PADDY is looking to retire and move on from managing the gym.</p>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="int.-home---morning---trigger-on-completing-23-of-the-character-events" class="level3">
<h3 data-anchor-id="int.-home---morning---trigger-on-completing-23-of-the-character-events"><strong>INT. HOME - MORNING - TRIGGER: On completing 2/3 of the character events</strong></h3>
<p>The retirement is looming. The PLAYER and ST. PADDY have a heated discussion about the gym. The PLAYER is willing to take over but PADDY is not sure if a changeling is fit for the job revealing the main characters true nature. Doubt settles in and the conflict is at its peak. The players past is also revealed.</p>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="int.-home---morning---trigger-on-completing-all-character-endings" class="level3">
<h3 data-anchor-id="int.-home---morning---trigger-on-completing-all-character-endings"><strong>INT. HOME - MORNING - TRIGGER: On completing all character endings</strong></h3>
<p>On successful completion of all character events without bad endings, The PLAYER and ST. PADDY meet once more. PADDY is impressed with the players determination to help others and decides that the PLAYER is fit to take over. The story comes to a close.</p>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
</section>
<section id="banshee-events---chaointe-doran" class="level1">
<h1>Banshee Events - Chaointe Doran</h1>
<p>The Banshee’s name is Chaointe Doran. It roughly translates to Lamenting Wanderer.</p>
<section id="int.-gym---day---trigger-first-day-at-work" class="level3">
<h3 data-anchor-id="int.-gym---day---trigger-first-day-at-work"><strong>INT. GYM - DAY - TRIGGER: First Day At Work</strong></h3>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p>Hey, my name is {{NAME}}. I’m new here. How can I help you today?</p>
<p><strong><em>CHAOINTE</em></strong></p>
<p>H-Hi, I-I’m C-Chaointe Doran. It’s nice to meet you {{NAME}}. I’m here to work out. W-would you like to join me please?</p>
<p><strong><em>PLAYER</em></strong></p>
<p>Yeah sure.</p>
<p><span style="color:SlateGray"><em>We started our workout. An uncomfortable silence loomed over us and the exercising feels excruciating. Chaointe is fidgety and looks like she has something to say but isn’t comfortable. I should break the silence.</em></span></p>
</center>
<section id="player-choice-as-i-keep-going-i-blurt-out" class="level4">
<h4 data-anchor-id="player-choice-as-i-keep-going-i-blurt-out"><strong>PLAYER CHOICE:</strong> As I keep going, I blurt out:</h4>
<section id="a.-this-exercise-is-tough.-how-are-you-managing" class="level5">
<h5 data-anchor-id="a.-this-exercise-is-tough.-how-are-you-managing"><strong>A.</strong> This exercise is tough. How are you managing?</h5>
<center>
<p><strong><em>CHAOINTE</em></strong></p>
<p>I’m doing well b-but you seem to be struggling a bit. Y-Your form is off. You don’t do this often, do you?</p>
<p><strong><em>PLAYER</em></strong></p>
<p>Yeah you’re right, I don’t work out much so I may not be the best option to look after this place.</p>
<p><strong><em>CHAOINTE</em></strong></p>
<p>Don’t worry, it will take some effort but I’m sure you’ll improve in no time.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>Chaointe helped me improve my form and as we continued to exercise, it was exhausting but it felt much better.</em></span></p>
<p>Thanks so much, this feels a lot better now.</p>
<p><strong><em>CHAOINTE</em></strong></p>
<p>N-no problem. Thanks for working out with me. L-let’s do it again.</p>
<p><strong><em>PLAYER</em></strong></p>
<p>Looking forward to it. See you soon.</p>
<p><span style="color:SlateGray"><em>Chaointe left with a spring in her step. I finish cleaning up and head home to sleep</em></span></p>
</center>
</section>
<section id="b.-whats-up-spit-it-out-already" class="level5">
<h5 data-anchor-id="b.-whats-up-spit-it-out-already"><strong>B.</strong> Whats up? Spit it out already!</h5>
<center>
<p><strong><em>CHAOINTE</em></strong></p>
<p>I-it’s n-nothing. I’m so s-sorry.</p>
<p><strong><em>PLAYER</em></strong></p>
<p>No need to apologize. Let’s keep pumping iron.</p>
<p><span style="color:SlateGray"><em>The awkward silence continued for the remainder of the workout. I’m exhausted and aching all over.</em></span></p>
<p>Phew, glad that’s done.</p>
<p><strong><em>CHAOINTE</em></strong></p>
<p>Y-yeah, I need to head off now. Bye.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>Chaointe left swiftly, leaving me wondering what she had to say. I finish cleaning up and head home to sleep</em></span></p>
</center>
<p><br></p>
</section>
</section>
</section>
<section id="int.-pub---night---trigger-first-event-completed" class="level3">
<h3 data-anchor-id="int.-pub---night---trigger-first-event-completed"><strong>INT. PUB - Night - TRIGGER: First event completed</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="int.-cafe---day---trigger-second-event-completed-met-pooka" class="level3">
<h3 data-anchor-id="int.-cafe---day---trigger-second-event-completed-met-pooka"><strong>INT. CAFE - DAY - TRIGGER: Second event completed, Met Pooka</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="int.-gym---daynight---trigger-third-event-completed-met-dullahan" class="level3">
<h3 data-anchor-id="int.-gym---daynight---trigger-third-event-completed-met-dullahan"><strong>INT. GYM - DAY/NIGHT - TRIGGER: Third event completed, Met Dullahan</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="ext.-street---night-forced---trigger-fourth-event-completed-friendship-threshold-reached" class="level3">
<h3 data-anchor-id="ext.-street---night-forced---trigger-fourth-event-completed-friendship-threshold-reached"><strong>EXT. STREET - NIGHT (Forced) - TRIGGER: Fourth event completed, Friendship Threshold Reached</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="ext.-street---night-forced---trigger-fourth-event-completed-friendship-threshold-not-reached" class="level3">
<h3 data-anchor-id="ext.-street---night-forced---trigger-fourth-event-completed-friendship-threshold-not-reached"><strong>EXT. STREET - NIGHT (Forced) - TRIGGER: Fourth event completed, Friendship Threshold Not Reached</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
</section>
<section id="pooka-events---púca-cleasaí" class="level1">
<h1>Pooka Events - Púca Cleasaí</h1>
<p>The pookas name is Púca Cleasaí. It roughly translates to Goblin Trickster.</p>
<section id="int.-gym---daynight---trigger-second-day-at-work" class="level3">
<h3 data-anchor-id="int.-gym---daynight---trigger-second-day-at-work"><strong>INT. GYM - DAY/NIGHT - TRIGGER: Second Day At Work</strong></h3>
<center>
<p><strong><em>PUCA</em></strong></p>
<p>Hi there tall one. What’s yar name?</p>
<p><strong><em>PLAYER</em></strong></p>
<p>Hey, I’m {{NAME}}. What about you?</p>
<p><strong><em>PUCA</em></strong></p>
<p>I’m the mighty Púca Cleasaí. Havn’t sen you around before; you new here?</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>For someone so short he seems to hold himself in high regard. It’d be nice to have his confidence.</em></span></p>
<p>Yeah, started recently and am here to help you out if needed.</p>
<p><strong><em>PUCA</em></strong></p>
<p>Good stuff. Since yar here to help lets sort this mess here out. This gym could use a slight re-modelling to improve the layout. Dear Paddy has too much on his head so this ill make his life easier.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>The commandeering Púca didn’t need to convince me. I good swooped up by his charisma and didn’t think to question him at all.</em></span></p>
<p>Alright lets get to work.</p>
<p><strong><em>PUCA</em></strong></p>
<p>Good lad. Lets do this!</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>We painstakingly moved everything at the gym at Púca’s whim. What seemed a good idea initially turned into a big mess. I looked around and everything was placed haphazardly. I beautiful gym got turned into a tripping hazard on my watch.</em></span></p>
</center>
<section id="player-choice-what-should-i-do-now" class="level4">
<h4 data-anchor-id="player-choice-what-should-i-do-now"><strong>PLAYER CHOICE:</strong> What should I do now?</h4>
<section id="a.-stop-this-maddness-and-fix-everything-even-though-it-will-take-a-long-time" class="level5">
<h5 data-anchor-id="a.-stop-this-maddness-and-fix-everything-even-though-it-will-take-a-long-time"><strong>A.</strong> Stop this maddness and fix everything even though It will take a long time</h5>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p>This isn’t working. We should stop and put it all back as it was before.</p>
<p><strong><em>PUCA</em></strong></p>
<p>B-But its so much fun messing with Paddy like this.</p>
<p><strong><em>PLAYER</em></strong></p>
<p>Messing?! Have some cop on that’s not how we should treat people!</p>
<p><span style="color:SlateGray"><em>My mind was rushing. I don’t like confrontation. Púca seemed impressed that I stood up to him as if he was messing with me and not Paddy.</em></span></p>
<p><strong><em>PUCA</em></strong></p>
<p>Alright, alright let’s sort this out so. Twas fun while it lasted.</p>
<p><strong><em>PLAYER</em></strong></p>
<p>Thanks.</p>
<p><span style="color:SlateGray"><em>We worked hard to fix the mess. It took longer than expecetd but the place was cleaner than before we started.</em></span></p>
</center>
</section>
<section id="b.-keep-going-to-avoid-confronting-mr.-púca" class="level5">
<h5 data-anchor-id="b.-keep-going-to-avoid-confronting-mr.-púca"><strong>B.</strong> Keep going to avoid confronting Mr.&nbsp;Púca</h5>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>We continued to work. The mess became worse. I’m in for it now. It’s time to wrap this up before It gets even worse.</em></span></p>
<p>There this should do it.</p>
<p><strong><em>PUCA</em></strong></p>
<p>Yeah, fine work today</p>
<p><span style="color:SlateGray"><em>Púca was grinning at me. He knows exactly what we had done here yet he also seems to be unsatisfied. Maybe I should have stopped him. I’ll tidy the place up before I head off for the day.</em></span></p>
</center>
</section>
<section id="common-dialog-post-decision" class="level5">
<h5 data-anchor-id="common-dialog-post-decision">Common Dialog Post Decision</h5>
<center>
<p><strong><em>PUCA</em></strong></p>
<p>That was hard work lad. Let’s have some fun again sometime. See you soon.</p>
<p><strong><em>PLAYER</em></strong></p>
<p>Bye, See ya around.</p>
</center>
<p><br></p>
</section>
</section>
</section>
<section id="int.-restaurant---day---trigger-first-event-completed" class="level3">
<h3 data-anchor-id="int.-restaurant---day---trigger-first-event-completed"><strong>INT. RESTAURANT - DAY - TRIGGER: First event completed</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="int.-gym---daynight---trigger-second-event-completed-met-dullahan" class="level3">
<h3 data-anchor-id="int.-gym---daynight---trigger-second-event-completed-met-dullahan"><strong>INT. GYM - DAY/NIGHT - TRIGGER: Second event completed, Met Dullahan</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="int.-restaurant---day---trigger-third-event-completed" class="level3">
<h3 data-anchor-id="int.-restaurant---day---trigger-third-event-completed"><strong>INT. RESTAURANT - DAY - TRIGGER: Third event completed</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="int.-forest---night-forced---trigger-fourth-event-completed-friendship-threshold-reached" class="level3">
<h3 data-anchor-id="int.-forest---night-forced---trigger-fourth-event-completed-friendship-threshold-reached"><strong>INT. FOREST - NIGHT (Forced) - TRIGGER: Fourth event completed, Friendship Threshold Reached</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="int.-forest---night-forced---trigger-fourth-event-completed-friendship-threshold-not-reached" class="level3">
<h3 data-anchor-id="int.-forest---night-forced---trigger-fourth-event-completed-friendship-threshold-not-reached"><strong>INT. FOREST - NIGHT (Forced) - TRIGGER: Fourth event completed, Friendship Threshold Not Reached</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
</section>
<section id="dullahan-events---crom-dubh" class="level1">
<h1>Dullahan Events - Crom Dubh</h1>
<p>The dullahans name is Crom Dubh as its known the be the Embodiment of this Celtic God.</p>
<section id="int.-gym---daynight---trigger-third-day-at-work" class="level3">
<h3 data-anchor-id="int.-gym---daynight---trigger-third-day-at-work"><strong>INT. GYM - DAY/NIGHT - TRIGGER: Third Day At Work</strong></h3>
<center>
<p><strong><em>CROM</em></strong></p>
<p>Hello Mister “A-Ahhh, t-that parson’s h-head i-is…” detatched. I’m Crom Dubh.</p>
<p>You’ve probably already heard of me but who might you be?</p>
<p><strong><em>PLAYER</em></strong></p>
<p>H-Hi, I’m {{NAME}}. Just your average Joe who started working here recently.</p>
<p><strong><em>CROM</em></strong></p>
<p>Average…Interesting…You seem to have gotten over headless solders quicker then most. So what do you need?</p>
</center>
<section id="player-choice-crom-doesnt-seem-to-worried-about-my-outburst.-what-should-i-do" class="level4">
<h4 data-anchor-id="player-choice-crom-doesnt-seem-to-worried-about-my-outburst.-what-should-i-do"><strong>PLAYER CHOICE:</strong> Crom doesn’t seem to worried about my outburst. What should I do?</h4>
<section id="a.-apologise-reflecting-on-your-moment-of-panic." class="level5">
<h5 data-anchor-id="a.-apologise-reflecting-on-your-moment-of-panic."><strong>A.</strong> Apologise, reflecting on your moment of panic.</h5>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p>I’m so sorry about my panicked outburst earlier. I assumed the worst. I thought someone had died.</p>
<p><strong><em>CROM</em></strong></p>
<p>Interesting, people usually jump like that from fear when they see me.</p>
<p><strong><em>PLAYER</em></strong></p>
<p>Well there was probably a small bit of that too when I seen you move.</p>
<p><strong><em>CROM</em></strong></p>
<p>That’s OK, you seem like an honest fellow. You also took the time to apologies to me too.</p>
<p><strong><em>PLAYER</em></strong></p>
<p>Thanks for being so accepting of my mistake. It won’t happen again.</p>
<p><strong><em>CROM</em></strong></p>
<p>No problem. I do love a good jump scare. Twas a bit of fun.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>The apology went well. It seems like Crom is well used to this kind of thing. Makes me wonder what kind of life she must lead.</em></span></p>
<p>Do you need help with anything today?</p>
<p><strong><em>CROM</em></strong></p>
<p>No, just wrapping up my exercises. I’ll be done and gone soon. Let’s chat again some other day.</p>
<p><strong><em>PLAYER</em></strong></p>
<p>Sounds good.</p>
<p><span style="color:SlateGray"><em>I left Crom to her own devices while I tidied up and filled out some paperwork. Once she left I wrapped up too.</em></span></p>
</center>
</section>
<section id="b.-ask-to-hold-her-head." class="level5">
<h5 data-anchor-id="b.-ask-to-hold-her-head."><strong>B.</strong> Ask to hold her head.</h5>
<center>
<p><strong><em>PLAYER</em></strong></p>
<p>Could I maybe hold your head?</p>
<p><strong><em>CROM</em></strong></p>
<p>NO!…How dare you make such an insolent request. You must have a death wish.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>I just made a bad situation worse. Crom is staring daggers at me and I worry my head may not stay on its solders for long either.</em></span></p>
<p>S-Sorry, I-I just…</p>
<p><strong><em>CROM</em></strong></p>
<p>You just what!? My patience is running thin. You ruined my exercising session. I should have you’re head for this.</p>
<p>Your lucky Patrick is in charge here. I owe him a debt of gratitude so I’ll let this one slide.</p>
<p>I’m heading off before anything else comes out of that fun-sized brain of yours.</p>
<p><strong><em>PLAYER</em></strong></p>
<p><span style="color:SlateGray"><em>Corm stomped away while I stood there in silence to avoid making things worse. Paddy, my savior I have failed thee. I tidied up and left for the day.</em></span></p>
</center>
<p><br></p>
</section>
</section>
</section>
<section id="int.-pub---night---trigger-first-event-completed-1" class="level3">
<h3 data-anchor-id="int.-pub---night---trigger-first-event-completed-1"><strong>INT. PUB - NIGHT - TRIGGER: First event completed</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="int.-gym---daynight---trigger-second-event-completed" class="level3">
<h3 data-anchor-id="int.-gym---daynight---trigger-second-event-completed"><strong>INT. GYM - DAY/NIGHT - TRIGGER: Second event completed</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="int.-pub---night---trigger-third-event-completed" class="level3">
<h3 data-anchor-id="int.-pub---night---trigger-third-event-completed"><strong>INT. PUB - NIGHT - TRIGGER: Third event completed</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="ext.-street---night-forced---trigger-fourth-event-completed-friendship-threshold-reached-1" class="level3">
<h3 data-anchor-id="ext.-street---night-forced---trigger-fourth-event-completed-friendship-threshold-reached-1"><strong>EXT. STREET - NIGHT (Forced) - TRIGGER: Fourth event completed, Friendship Threshold Reached</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
<section id="ext.-street---night-forced---trigger-fourth-event-completed-friendship-threshold-not-reached-1" class="level3">
<h3 data-anchor-id="ext.-street---night-forced---trigger-fourth-event-completed-friendship-threshold-not-reached-1"><strong>EXT. STREET - NIGHT (Forced) - TRIGGER: Fourth event completed, Friendship Threshold Not Reached</strong></h3>
<p>N/A - Not in scope for beta release</p>
<center>
</center>
<p><br></p>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<ul>
<li>Curran, B. and Whitson, A. (2007) A field guide to Irish Fairies. Belfast: Appletree Press.</li>
<li>Quinn, S. (2024) The Faerie Isle: Tales and Traditions of Ireland’s Forgotten Folklore. London: Walker Books Ltd.</li>
<li>Jackson, J.K. and Fitzgerald, K. (2022) Irish folk &amp; fairy tales: Fables, folklore &amp; ancient stories. London: Flame Tree Publishing.</li>
<li>Yeats, W.B. (1888) Irish fairy tales and Folklore. New York, NY: Clydesdale Press.</li>
</ul>


</section>
</main></div>
    </div>
  </div>
</div>
 <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>